import{j as e,g as j,u as x}from"./utils.Cq646Qjt.js";import{r as g}from"./index.Cd_vQiNd.js";const p=({title:a,slug:c,date:t,author:i,authorImage:n,image:d,excerpt:h,categories:l,lang:r="en"})=>{const o=x(r),s=j(`/blog/${c}`,r);return e.jsxs("article",{className:"blog-card",children:[e.jsx("div",{className:"blog-card-header",children:e.jsxs("div",{className:"blog-card-author",children:[e.jsx("div",{className:"author-avatar",children:n&&e.jsx("img",{src:n,alt:i})}),e.jsxs("div",{className:"author-info",children:[e.jsx("span",{className:"author-name",children:i}),e.jsx("span",{className:"post-date",children:t})]})]})}),d&&e.jsx("div",{className:"blog-card-image",children:e.jsx("a",{href:s,children:e.jsx("img",{src:d,alt:a,loading:"lazy"})})}),e.jsxs("div",{className:"blog-card-content",children:[e.jsx("h2",{className:"blog-card-title",children:e.jsx("a",{href:s,children:a})}),e.jsx("p",{className:"blog-card-excerpt",children:h}),l&&l.length>0&&e.jsx("div",{className:"blog-card-categories",children:l.map((m,u)=>e.jsxs("span",{className:"category-tag",children:["#",m]},u))}),e.jsxs("a",{href:s,className:"blog-card-link",children:[o("blog.readMore")," â†’"]})]})]})},N=({onSearch:a,onCategoryFilter:c,categories:t,selectedCategory:i,lang:n="en"})=>{const[d,h]=g.useState(""),l=x(n),r=s=>{const m=s.target.value;h(m),a(m)},o=s=>{c(s)};return e.jsxs("div",{className:"search-bar-container",children:[e.jsxs("div",{className:"search-input-wrapper",children:[e.jsx("svg",{className:"search-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16zM19 19l-4.35-4.35",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("input",{type:"text",className:"search-input",placeholder:l("blog.searchPlaceholder"),value:d,onChange:r}),d&&e.jsx("button",{className:"search-clear",onClick:()=>{h(""),a("")},"aria-label":"Clear search",children:"âœ•"})]}),e.jsxs("div",{className:"category-filters",children:[e.jsx("button",{className:`category-filter ${i==="all"?"active":""}`,onClick:()=>o("all"),children:l("blog.allCategories")}),t.map((s,m)=>e.jsx("button",{className:`category-filter ${i===s?"active":""}`,onClick:()=>o(s),children:s},m))]})]})};class b extends g.Component{state={hasError:!1,error:null};static getDerivedStateFromError(c){return{hasError:!0,error:c}}componentDidCatch(c,t){console.error("Uncaught error:",c,t)}render(){return this.state.hasError?this.props.fallback||e.jsxs("div",{className:"p-4 border border-red-500 bg-red-50 rounded text-red-900",children:[e.jsx("h2",{className:"text-lg font-bold mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-sm font-mono",children:this.state.error?.message})]}):this.props.children}}const C=({posts:a,lang:c="en"})=>{const[t,i]=g.useState(""),[n,d]=g.useState("all"),h=g.useMemo(()=>{const r=new Set;return a.forEach(o=>{o.categories.forEach(s=>r.add(s))}),Array.from(r).sort()},[a]),l=g.useMemo(()=>a.filter(r=>{const o=t===""||r.title.toLowerCase().includes(t.toLowerCase())||r.excerpt.toLowerCase().includes(t.toLowerCase())||r.author.toLowerCase().includes(t.toLowerCase()),s=n==="all"||r.categories.includes(n);return o&&s}),[a,t,n]);return e.jsx(b,{children:e.jsxs("div",{className:"blog-feed-container",children:[e.jsx(N,{onSearch:i,onCategoryFilter:d,categories:h,selectedCategory:n,lang:c}),l.length===0?e.jsxs("div",{className:"no-results",children:[e.jsx("p",{children:"No posts found ðŸ˜”"}),e.jsx("p",{className:"no-results-hint",children:'Try searching for other terms or select "All" in categories.'})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"results-count",children:[l.length," ",l.length===1?"post":"posts"]}),e.jsx("div",{className:"blog-feed-grid",children:l.map((r,o)=>e.jsx(p,{...r,lang:c},o))})]})]})})};export{C as BlogFeed};
