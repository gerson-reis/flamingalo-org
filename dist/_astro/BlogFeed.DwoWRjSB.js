import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as h}from"./index.Cd_vQiNd.js";const m=({title:t,slug:s,date:o,author:l,authorImage:i,image:d,excerpt:n,categories:r})=>e.jsxs("article",{className:"blog-card",children:[e.jsx("div",{className:"blog-card-header",children:e.jsxs("div",{className:"blog-card-author",children:[e.jsx("div",{className:"author-avatar",children:i&&e.jsx("img",{src:i,alt:l})}),e.jsxs("div",{className:"author-info",children:[e.jsx("span",{className:"author-name",children:l}),e.jsx("span",{className:"post-date",children:o})]})]})}),d&&e.jsx("div",{className:"blog-card-image",children:e.jsx("a",{href:`/blog/${s.replace("/index.md","")}`,children:e.jsx("img",{src:d,alt:t,loading:"lazy"})})}),e.jsxs("div",{className:"blog-card-content",children:[e.jsx("h2",{className:"blog-card-title",children:e.jsx("a",{href:`/blog/${s.replace("/index.md","")}`,children:t})}),e.jsx("p",{className:"blog-card-excerpt",children:n}),r&&r.length>0&&e.jsx("div",{className:"blog-card-categories",children:r.map((a,c)=>e.jsxs("span",{className:"category-tag",children:["#",a]},c))}),e.jsx("a",{href:`/blog/${s.replace("/index.md","")}`,className:"blog-card-link",children:"Read more â†’"})]})]}),x=({onSearch:t,onCategoryFilter:s,categories:o,selectedCategory:l})=>{const[i,d]=h.useState(""),n=a=>{const c=a.target.value;d(c),t(c)},r=a=>{s(a)};return e.jsxs("div",{className:"search-bar-container",children:[e.jsxs("div",{className:"search-input-wrapper",children:[e.jsx("svg",{className:"search-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M9 17A8 8 0 1 0 9 1a8 8 0 0 0 0 16zM19 19l-4.35-4.35",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("input",{type:"text",className:"search-input",placeholder:"Search posts...",value:i,onChange:n}),i&&e.jsx("button",{className:"search-clear",onClick:()=>{d(""),t("")},"aria-label":"Clear search",children:"âœ•"})]}),e.jsxs("div",{className:"category-filters",children:[e.jsx("button",{className:`category-filter ${l==="all"?"active":""}`,onClick:()=>r("all"),children:"All"}),o.map((a,c)=>e.jsx("button",{className:`category-filter ${l===a?"active":""}`,onClick:()=>r(a),children:a},c))]})]})};class g extends h.Component{state={hasError:!1,error:null};static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,o){console.error("Uncaught error:",s,o)}render(){return this.state.hasError?this.props.fallback||e.jsxs("div",{className:"p-4 border border-red-500 bg-red-50 rounded text-red-900",children:[e.jsx("h2",{className:"text-lg font-bold mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-sm font-mono",children:this.state.error?.message})]}):this.props.children}}const p=({posts:t})=>{const[s,o]=h.useState(""),[l,i]=h.useState("all"),d=h.useMemo(()=>{const r=new Set;return t.forEach(a=>{a.categories.forEach(c=>r.add(c))}),Array.from(r).sort()},[t]),n=h.useMemo(()=>t.filter(r=>{const a=s===""||r.title.toLowerCase().includes(s.toLowerCase())||r.excerpt.toLowerCase().includes(s.toLowerCase())||r.author.toLowerCase().includes(s.toLowerCase()),c=l==="all"||r.categories.includes(l);return a&&c}),[t,s,l]);return e.jsx(g,{children:e.jsxs("div",{className:"blog-feed-container",children:[e.jsx(x,{onSearch:o,onCategoryFilter:i,categories:d,selectedCategory:l}),n.length===0?e.jsxs("div",{className:"no-results",children:[e.jsx("p",{children:"No posts found ðŸ˜”"}),e.jsx("p",{className:"no-results-hint",children:'Try searching for other terms or select "All" in categories.'})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"results-count",children:[n.length," ",n.length===1?"post":"posts"]}),e.jsx("div",{className:"blog-feed-grid",children:n.map((r,a)=>e.jsx(m,{...r},a))})]})]})})};export{p as BlogFeed};
